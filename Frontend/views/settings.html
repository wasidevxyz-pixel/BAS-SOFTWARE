<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - Bilal Accounting System (BAS)</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="/css/desktop-style.css" rel="stylesheet">
    <link href="/css/sidebar.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
    <style>
        /* Modern Settings Tabs - FORCE Horizontal Layout with Maximum Specificity */

        /* Override sidebar.css and Bootstrap */
        div.card-body #settingsTabs.nav.nav-pills,
        div.card-body .nav.nav-pills.nav-fill,
        div.card-body ul.nav.nav-pills,
        #settingsTabs.nav.nav-pills,
        .nav.nav-pills.nav-fill,
        ul.nav.nav-pills {
            display: flex !important;
            flex-direction: row !important;
            flex-wrap: nowrap !important;
            overflow-x: auto !important;
            overflow-y: hidden !important;
            gap: 5px !important;
            background: #f8f9fa !important;
            padding: 10px !important;
            border-radius: 8px !important;
            list-style: none !important;
            width: 100% !important;
            white-space: nowrap !important;
        }

        /* Custom Scrollbar for Settings Tabs */
        #settingsTabs::-webkit-scrollbar,
        .nav-pills::-webkit-scrollbar {
            height: 6px;
        }

        #settingsTabs::-webkit-scrollbar-track,
        .nav-pills::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        #settingsTabs::-webkit-scrollbar-thumb,
        .nav-pills::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 3px;
        }

        #settingsTabs::-webkit-scrollbar-thumb:hover,
        .nav-pills::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        /* Force nav-items to be inline */
        div.card-body #settingsTabs .nav-item,
        div.card-body .nav-pills .nav-item,
        div.card-body ul.nav.nav-pills li,
        #settingsTabs .nav-item,
        .nav-pills .nav-item,
        ul.nav.nav-pills li,
        li.nav-item[role="presentation"] {
            flex: 1 1 auto !important;
            min-width: 100px !important;
            display: inline-block !important;
            float: none !important;
            position: relative !important;
            width: auto !important;
        }

        /* Force nav-links to be horizontal */
        div.card-body #settingsTabs .nav-link,
        div.card-body .nav-pills .nav-link,
        div.card-body ul.nav.nav-pills button,
        #settingsTabs .nav-link,
        .nav-pills .nav-link,
        ul.nav.nav-pills button,
        button.nav-link[data-bs-toggle="tab"] {
            display: block !important;
            border-radius: 8px !important;
            padding: 10px 15px !important;
            transition: all 0.3s ease !important;
            color: #6c757d !important;
            font-weight: 500 !important;
            text-align: center !important;
            background: white !important;
            border: 1px solid #dee2e6 !important;
            white-space: nowrap !important;
            width: 100% !important;
            cursor: pointer !important;
        }

        div.card-body #settingsTabs .nav-link:hover,
        #settingsTabs .nav-link:hover,
        .nav-pills .nav-link:hover {
            background-color: #e9ecef !important;
            color: #0d6efd !important;
            transform: translateY(-2px) !important;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
        }

        div.card-body #settingsTabs .nav-link.active,
        #settingsTabs .nav-link.active,
        .nav-pills .nav-link.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
            color: white !important;
            border-color: #667eea !important;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4) !important;
        }

        .nav-pills .nav-link i {
            font-size: 1.1rem;
        }

        /* Responsive: Show only icons on mobile */
        @media (max-width: 768px) {
            .nav-pills .nav-link {
                padding: 10px !important;
            }
        }

        /* Fix Tab Switching: Force hide inactive tabs */
        /* Fix Tab Switching: Force hide inactive tabs */
        .tab-content>.tab-pane {
            display: none !important;
            opacity: 0;
        }

        .tab-content>.active {
            display: block !important;
            opacity: 1;
        }

        /* Ensure fade transitions don't break display */
        .tab-content>.tab-pane.fade.show.active {
            display: block !important;
            opacity: 1 !important;
        }
    </style>
</head>

<body>
    <!-- Main Content Wrapper -->
    <div class="main-content">
        <!-- Standardized Page Header -->
        <div class="page-header px-3">
            <div style="flex: 1; display: flex; align-items: center;">
                <i class="fas fa-bars me-3" id="sidebarToggle" style="cursor:pointer; font-size: 1rem;"></i>
                <h4 class="mb-0">Settings</h4>
            </div>
            <div style="flex: 1; display: flex; justify-content: flex-end; align-items: center;">
                <div class="dropdown">
                    <div class="d-flex align-items-center text-white" data-bs-toggle="dropdown"
                        style="cursor: pointer;">
                        <i class="fas fa-user-circle me-2" style="font-size: 1.2rem;"></i>
                        <span id="userName" class="me-2">User</span>
                        <i class="fas fa-chevron-down" style="font-size: 0.7rem;"></i>
                    </div>
                    <ul class="dropdown-menu dropdown-menu-end shadow-sm">
                        <li><a class="dropdown-item logout-btn" href="#"><i
                                    class="fas fa-sign-out-alt me-2 text-danger"></i>Sign Out</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="container-fluid mt-4">

            <!-- Settings Tabs -->
            <div class="row">
                <div class="col-12">
                    <div class="card shadow-sm mb-3">
                        <div class="card-body p-2">
                            <ul class="nav nav-pills nav-fill" id="settingsTabs" role="tablist"
                                style="display: flex !important; flex-direction: row !important; flex-wrap: nowrap !important; overflow-x: auto !important; overflow-y: hidden !important; gap: 5px !important; white-space: nowrap !important;">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" id="company-tab" data-bs-toggle="tab"
                                        data-bs-target="#company" type="button" role="tab">
                                        <i class="fas fa-building me-2"></i>
                                        <span class="d-none d-md-inline">Company</span>
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="invoice-tab" data-bs-toggle="tab"
                                        data-bs-target="#invoice" type="button" role="tab">
                                        <i class="fas fa-file-invoice me-2"></i>
                                        <span class="d-none d-md-inline">Invoice</span>
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="tax-tab" data-bs-toggle="tab" data-bs-target="#tax"
                                        type="button" role="tab">
                                        <i class="fas fa-percentage me-2"></i>
                                        <span class="d-none d-md-inline">Tax</span>
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="backup-tab" data-bs-toggle="tab"
                                        data-bs-target="#backup" type="button" role="tab">
                                        <i class="fas fa-database me-2"></i>
                                        <span class="d-none d-md-inline">Backup</span>
                                    </button>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab Content -->
            <div class="tab-content" id="settingsTabContent">
                <!-- Company Settings -->
                <div class="tab-pane fade show active" id="company" role="tabpanel">
                    <div class="card shadow mt-3">
                        <div class="card-body">
                            <h5 class="card-title">Company Information</h5>
                            <form id="companyForm">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="companyName" class="form-label">Company Name *</label>
                                        <input type="text" class="form-control" id="companyName" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="companyEmail" class="form-label">Email</label>
                                        <input type="email" class="form-control" id="companyEmail">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="companyPhone" class="form-label">Phone</label>
                                        <input type="tel" class="form-control" id="companyPhone">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="companyWebsite" class="form-label">Website</label>
                                        <input type="url" class="form-control" id="companyWebsite">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12 mb-3">
                                        <label for="companyAddress" class="form-label">Address</label>
                                        <textarea class="form-control" id="companyAddress" rows="3"></textarea>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="companyCity" class="form-label">City</label>
                                        <input type="text" class="form-control" id="companyCity">
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label for="companyState" class="form-label">State</label>
                                        <input type="text" class="form-control" id="companyState">
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label for="companyPostalCode" class="form-label">Postal Code</label>
                                        <input type="text" class="form-control" id="companyPostalCode">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="companyGSTIN" class="form-label">GSTIN</label>
                                        <input type="text" class="form-control" id="companyGSTIN">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="companyPAN" class="form-label">PAN</label>
                                        <input type="text" class="form-control" id="companyPAN">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12 mb-3">
                                        <label for="companyLogo" class="form-label">Company Logo</label>
                                        <input type="file" class="form-control" id="companyLogo" accept="image/*">
                                        <div class="mt-2">
                                            <img id="logoPreview" src="" alt="Logo Preview"
                                                style="max-width: 200px; display: none;">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-save me-1"></i> Save Company Settings
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Invoice Settings -->
                <div class="tab-pane fade" id="invoice" role="tabpanel">
                    <div class="card shadow mt-3">
                        <div class="card-body">
                            <h5 class="card-title">Invoice Settings</h5>
                            <form id="invoiceForm">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="invoicePrefix" class="form-label">Invoice Prefix</label>
                                        <input type="text" class="form-control" id="invoicePrefix" placeholder="INV">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="invoiceStartNumber" class="form-label">Starting Number</label>
                                        <input type="number" class="form-control" id="invoiceStartNumber" value="1">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="billPrefix" class="form-label">Bill Prefix</label>
                                        <input type="text" class="form-control" id="billPrefix" placeholder="BILL">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="billStartNumber" class="form-label">Bill Starting Number</label>
                                        <input type="number" class="form-control" id="billStartNumber" value="1">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="quotationPrefix" class="form-label">Quotation Prefix</label>
                                        <input type="text" class="form-control" id="quotationPrefix" placeholder="QUOT">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="quotationStartNumber" class="form-label">Quotation Starting
                                            Number</label>
                                        <input type="number" class="form-control" id="quotationStartNumber" value="1">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12 mb-3">
                                        <label for="invoiceTerms" class="form-label">Default Terms & Conditions</label>
                                        <textarea class="form-control" id="invoiceTerms" rows="4"></textarea>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12 mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="includeTaxInInvoice">
                                            <label class="form-check-label" for="includeTaxInInvoice">
                                                Include Tax Details in Invoice
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12 mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="includeLogoInInvoice">
                                            <label class="form-check-label" for="includeLogoInInvoice">
                                                Include Company Logo in Invoice
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-save me-1"></i> Save Invoice Settings
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Tax Settings -->
                <div class="tab-pane fade" id="tax" role="tabpanel">
                    <div class="card shadow mt-3">
                        <div class="card-body">
                            <h5 class="card-title">Tax Settings</h5>
                            <form id="taxForm">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="defaultTaxRate" class="form-label">Default Tax Rate (%)</label>
                                        <input type="number" class="form-control" id="defaultTaxRate" min="0" max="100"
                                            step="0.1">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="taxCalculationMethod" class="form-label">Tax Calculation
                                            Method</label>
                                        <select class="form-select" id="taxCalculationMethod">
                                            <option value="inclusive">Tax Inclusive</option>
                                            <option value="exclusive">Tax Exclusive</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="cgstRate" class="form-label">CGST Rate (%)</label>
                                        <input type="number" class="form-control" id="cgstRate" min="0" max="100"
                                            step="0.1">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="sgstRate" class="form-label">SGST Rate (%)</label>
                                        <input type="number" class="form-control" id="sgstRate" min="0" max="100"
                                            step="0.1">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="igstRate" class="form-label">IGST Rate (%)</label>
                                        <input type="number" class="form-control" id="igstRate" min="0" max="100"
                                            step="0.1">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="cessRate" class="form-label">CESS Rate (%)</label>
                                        <input type="number" class="form-control" id="cessRate" min="0" max="100"
                                            step="0.1">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12 mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="enableReverseCharge">
                                            <label class="form-check-label" for="enableReverseCharge">
                                                Enable Reverse Charge Mechanism
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-save me-1"></i> Save Tax Settings
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>



                <!-- Backup Settings -->
                <div class="tab-pane fade" id="backup" role="tabpanel">
                    <div class="card shadow mt-3">
                        <div class="card-body">
                            <h5 class="card-title">Backup & Restore</h5>

                            <div class="row mb-4">
                                <div class="col-md-6">
                                    <h6>Create Backup</h6>
                                    <p class="text-muted">Create a backup of your database and settings.</p>
                                    <button class="btn btn-primary" onclick="createBackup()">
                                        <i class="fas fa-download me-1"></i> Create Backup
                                    </button>
                                </div>
                                <div class="col-md-6">
                                    <h6>Restore Backup</h6>
                                    <p class="text-muted">Restore from a previous backup file.</p>
                                    <input type="file" class="form-control mb-2" id="backupFile" accept=".json">
                                    <button class="btn btn-warning" onclick="restoreBackup()">
                                        <i class="fas fa-upload me-1"></i> Restore Backup
                                    </button>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-12">
                                    <h6>Automatic Backup Settings</h6>
                                    <form id="backupSettingsForm">
                                        <div class="row">
                                            <div class="col-md-6 mb-3">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox"
                                                        id="enableAutoBackup">
                                                    <label class="form-check-label" for="enableAutoBackup">
                                                        Enable Automatic Backup
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="col-md-6 mb-3">
                                                <label for="backupFrequency" class="form-label">Backup Frequency</label>
                                                <select class="form-select" id="backupFrequency">
                                                    <option value="daily">Daily</option>
                                                    <option value="weekly">Weekly</option>
                                                    <option value="monthly">Monthly</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6 mb-3">
                                                <label for="backupRetentionDays" class="form-label">Retention Period
                                                    (Days)</label>
                                                <input type="number" class="form-control" id="backupRetentionDays"
                                                    value="30">
                                            </div>
                                            <div class="col-md-6 mb-3">
                                                <label for="backupPath" class="form-label">Backup Path</label>
                                                <input type="text" class="form-control" id="backupPath"
                                                    placeholder="/backups">
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-12">
                                                <button type="submit" class="btn btn-primary">
                                                    <i class="fas fa-save me-1"></i> Save Backup Settings
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>



        <!-- Scripts -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script src="/js/pageAccess.js"></script>
        <script src="/js/sidebar.js"></script>
        <script src="/js/settings.js"></script>
</body>

</html>